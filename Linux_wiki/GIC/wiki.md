
Linux内核设计与实现(原书第3版)

# 第(8) 章 下半部和推后执行的工作

**记住，中断处理程序会异步执行，并且在最好的情况下它也会锁定当前的中断线. **

因此将中断处理程序持续执行的时间缩短到最小程度显得非常重要。

对于在上半部和下半部之间划分工作，尽管不存在某种严格的规则，但还是有一些提示可供借鉴:

如果一个任务**对时间非常敏感**, 将其放在中断处理程序中执行.

如果一个任务**和硬件相关**, 将其放在中断处理程序中执行.

如果一个任务**要保证不被其他中断 (特别是相同的中断) 打断**, 将其放在中断处理程序中执行,

其他所有任务, 考虑放置在下半部执行.

当你开始尝试写自己的驱动程序的时候, 读一下别人的中断处理程序和相应的下半部可能会让你受益匪浅, 在决定怎样把你的中断处理流程中的工作划分到上半部和下半部中去的时候,

问问自己什么必须放进上半部而什么可以放进下半部, 通常, 中断处理程序要执行得越快越好,









